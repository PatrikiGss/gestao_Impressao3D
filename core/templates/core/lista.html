{% extends 'core/base.html' %}
{% load static %}
{% block title %}Lista de Cadastros{% endblock %}

{% block content %}
    <h1>Cadastros</h1>
    <p><a href="{% url 'core:cadastro' %}">Novo cadastro</a></p>

    {% if items %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Curso</th>
                <th>Telefone</th>
                <th>Arquivo / Link</th>
                <th>Data</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
        {% for it in items %}
            <tr>
                <td>{{ it.id }}</td>
                <td>{{ it.nome }}</td>
                <td>{{ it.get_curso_display }}</td>
                <td>{{ it.telefone }}</td>
                <td>
                    {% if it.arq_upload %}
                        {{ it.arq_upload.name|slice:"8:" }}
                    {% elif it.arq_link %}
                        <a href="{{ it.arq_link }}" target="_blank">Link</a>
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>{{ it.data_envio|date:"d/m/Y H:i" }}</td>
                <td class="table-actions">
                    {% if it.arq_upload %}
                        <a href="{% url 'core:download_arquivo' it.pk %}">Download</a> |
                    {% endif %}
                    <a href="{% url 'core:excluir' it.pk %}">Excluir</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p>Nenhum cadastro ainda.</p>
    {% endif %}
{% endblock %}
